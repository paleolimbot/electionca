<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plotting election data • electionca</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Plotting election data">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">electionca</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/plot_election.html">Plotting election data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/paleolimbot/electionca">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Plotting election data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/paleolimbot/electionca/blob/master/vignettes/plot_election.Rmd"><code>vignettes/plot_election.Rmd</code></a></small>
      <div class="hidden name"><code>plot_election.Rmd</code></div>

    </div>

    
    
<p>If you’re looking to make a simple plot of election winners, you probably want to use <code><a href="../reference/plot_election_map.html">plot_election()</a></code> or <code><a href="../reference/plot_election_map.html">plot_election_map()</a></code>. If you can’t make the plot you want using those, this vignette is for you. We’ll use the <a href="https://tidyverse.org/">tidyverse</a> and the <a href="https://lubridate.tidyverse.org/">lubridate</a> packages. I happen to think the colours work better with <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">ggplot2::theme_bw()</a></code>, so I’m going to set that as the default theme.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyverse)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(lubridate)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(electionca)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">theme_set</span>(<span class="kw">theme_bw</span>())</a></code></pre></div>
<div id="raw-data-and-bar-charts" class="section level2">
<h2 class="hasAnchor">
<a href="#raw-data-and-bar-charts" class="anchor"></a>Raw data and bar charts</h2>
<p>The <code><a href="../reference/election_results.html">election_results()</a></code> function is designed to give you the data that you probably want to work with. Use the <code>years</code> and <code>provinces</code> arguments to filter for specific elections and provinces, or use <a href="https://dplyr.tidyverse.org/">dplyr</a> functions to get the data in the right form.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">on_<span class="dv">2015</span>_<span class="dv">2019</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/election_results.html">election_results</a></span>(<span class="dv">2015</span><span class="op">:</span><span class="dv">2019</span>, <span class="st">"Ontario"</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">on_<span class="dv">2015</span>_<span class="dv">2019</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; # A tibble: 1,365 x 11</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt;    election_date riding name  party votes result person_id province riding_label</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt;    &lt;date&gt;        &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;fct&gt;    &lt;chr&gt;       </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt;  1 2015-10-19    ON/18… Bruc… Cons… 24836 Elect…     11535 Ontario  Simcoe North</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt;  2 2015-10-19    ON/18… Liz … Libe… 22718 Defea…        NA Ontario  Simcoe North</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt;  3 2015-10-19    ON/18… Rich… New …  6037 Defea…        NA Ontario  Simcoe North</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt;  4 2015-10-19    ON/18… Pete… Gree…  2543 Defea…        NA Ontario  Simcoe North</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt;  5 2015-10-19    ON/18… Jaco… No a…   618 Defea…        NA Ontario  Simcoe North</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt;  6 2015-10-19    ON/18… Scot… Chri…   319 Defea…        NA Ontario  Simcoe North</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt;  7 2015-10-19    ON/19… Juli… Libe… 21947 Elect…     18491 Ontario  Davenport   </span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt;  8 2015-10-19    ON/19… Andr… New … 20506 Defea…     17868 Ontario  Davenport   </span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt;  9 2015-10-19    ON/19… Carl… Cons…  5233 Defea…        NA Ontario  Davenport   </span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; 10 2015-10-19    ON/19… Dan … Gree…  1530 Defea…        NA Ontario  Davenport   </span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; # … with 1,355 more rows, and 2 more variables: riding_id &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt; #   election_year &lt;dbl&gt;</span></a></code></pre></div>
<p>Data in this form is suitable for aggregation, either by dplyr’s <code>group_by() %&gt;% summarise()</code> or using some kind of aggregator <code>stat_*()</code> in ggplot2. In this case, we’re plotting the number of votes received by each party in province of Ontario in the 2015 and 2019 general elections (you could also do this using <code><a href="../reference/plot_votes.html">plot_votes()</a></code>). Note the use of <code><a href="https://forcats.tidyverse.org/reference/fct_lump.html">forcats::fct_lump()</a></code> and <code><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">forcats::fct_reorder()</a></code> to plot the most popular parties (if you don’t use these, you’ll get a whole lot of parties that received few votes). I also use <code><a href="../reference/party_colour.html">scale_fill_party()</a></code> here, not because it’s necessary, but because it makes the plot much more user-friendly (when is the last time you saw an election result plot without party colours!).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">on_<span class="dv">2015</span>_<span class="dv">2019</span> <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">    <span class="dt">party =</span> party <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="st">      </span><span class="kw">fct_lump</span>(<span class="dt">n =</span> <span class="dv">4</span>, <span class="dt">w =</span> votes) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="st">      </span><span class="kw">fct_reorder</span>(votes, sum)</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(party, <span class="dt">fill =</span> party)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="st">  </span><span class="kw">stat_count</span>(<span class="kw">aes</span>(<span class="dt">weight =</span> votes <span class="op">/</span><span class="st"> </span><span class="fl">1e6</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(<span class="kw"><a href="http://lubridate.tidyverse.org/reference/year.html">year</a></span>(election_date))) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="../reference/party_colour.html">scale_fill_party</a></span>(<span class="dt">guide =</span> <span class="st">"none"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">"Millions of votes"</span>)</a></code></pre></div>
<p><img src="plot_election_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>This reflects the number of votes, but not the number of seats. To plot the number of seats, we need to <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> the election results data to only the winners of each riding (<code>result == "Elected"</code>), and stop scaling by <code>votes</code>, since each riding should take up the same amount of space regardless of how many votes the winner received (you could also do this using <code><a href="../reference/plot_votes.html">plot_seats()</a></code>. To order the parties properly, we need to order by frequency rather than by the number of votes that each received, which I do here using <code><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">forcats::fct_infreq()</a></code> and <code><a href="https://forcats.tidyverse.org/reference/fct_rev.html">forcats::fct_rev()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">on_<span class="dv">2015</span>_<span class="dv">2019</span> <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(result <span class="op">==</span><span class="st"> "Elected"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    <span class="dt">party =</span> party <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="st">      </span><span class="kw">fct_infreq</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="st">      </span><span class="kw">fct_rev</span>()</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(party, <span class="dt">fill =</span> party)) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="st">  </span><span class="kw">stat_count</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(<span class="kw"><a href="http://lubridate.tidyverse.org/reference/year.html">year</a></span>(election_date))) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="st">  </span><span class="kw"><a href="../reference/party_colour.html">scale_fill_party</a></span>(<span class="dt">guide =</span> <span class="st">"none"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">"Number of seats"</span>)</a></code></pre></div>
<p><img src="plot_election_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>Another way to plot these data would be to put the year on the x-axis and stack all the bars on top of eachother to make it easier to compare the results from year to year. I’ll use the number of seats here, but one could also do this with the number of votes using the same <code>stat_count()</code> as above.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">on_<span class="dv">2015</span>_<span class="dv">2019</span> <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(result <span class="op">==</span><span class="st"> "Elected"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">    <span class="dt">party =</span> party <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="st">      </span><span class="kw">fct_infreq</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="st">      </span><span class="kw">fct_rev</span>()</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw"><a href="http://lubridate.tidyverse.org/reference/year.html">year</a></span>(election_date)), <span class="dt">fill =</span> party)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="st">  </span><span class="kw">stat_count</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="../reference/party_colour.html">scale_fill_party</a></span>(<span class="dt">guide =</span> <span class="st">"none"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">"Election year"</span>, <span class="dt">y =</span> <span class="st">"Number of seats"</span>)</a></code></pre></div>
<p><img src="plot_election_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Another plot you might want to make is one comparing how various provinces voted. The code for this is similar to the election year plot above, but instead uses <code>province</code> on the x axis. Because or original data was only for Ontario, we need to fetch a new subset of the data using <code><a href="../reference/election_results.html">election_results()</a></code>. I think this makes more sense using <code>votes</code> rather than seats, so I’m going to use that version of the plot. I also think it makes more sense to use <code>position = "fill"</code> here, because we really want to see the percentage of how the provinces voted, rather than the number of votes cast in each province (although both are useful plots!).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../reference/election_results.html">election_results</a></span>(<span class="dt">year =</span> <span class="dv">2015</span><span class="op">:</span><span class="dv">2019</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">    <span class="dt">party =</span> party <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="st">      </span><span class="kw">fct_lump</span>(<span class="dt">n =</span> <span class="dv">5</span>, <span class="dt">w =</span> votes) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="st">      </span><span class="kw">fct_reorder</span>(votes, sum) </a>
<a class="sourceLine" id="cb6-6" data-line-number="6">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> province, <span class="dt">fill =</span> party)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="st">  </span><span class="kw">stat_count</span>(<span class="kw">aes</span>(<span class="dt">weight =</span> votes), <span class="dt">position =</span> <span class="st">"fill"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="../reference/party_colour.html">scale_fill_party</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw"><a href="https://scales.r-lib.org//reference/label_percent.html">percent_format</a></span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">"Proportion of votes"</span>)</a></code></pre></div>
<p><img src="plot_election_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div id="incorporating-geography" class="section level2">
<h2 class="hasAnchor">
<a href="#incorporating-geography" class="anchor"></a>Incorporating geography</h2>
<p>More often than not, you’ve probably seen an election map with the whole of Canada pictured, most of which are the three northern ridings of Nunavut, Northwest Territories, and Yukon Territory. This grossly overestimates the importance of these ridings, so as an alternative, the electionca package includes some information that can be used to plot ridings as a grid. The easiest way to do this is using <code><a href="../reference/plot_election_map.html">plot_election()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="../reference/plot_election_map.html">plot_election</a></span>(<span class="dv">2015</span><span class="op">:</span><span class="dv">2019</span>)</a></code></pre></div>
<p><img src="plot_election_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>If you’d like to tweak this plot, you’ll have to recreate it using <code>election_data()</code>, <code>layout_province_grid</code>, and some trickery with <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">ggplot2::facet_grid()</a></code>. The principle is that <code>layout_province_grid</code> contains a <code>geom_x</code> and <code>geom_y</code> column that are a quasi-geographical representation of each riding, grouped by province, and that <code><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">ggplot2::geom_tile()</a></code> can be used to display this. Because the x and y axes aren’t important here, we can use <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">ggplot2::theme_void()</a></code> to hide them.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/election_results.html">election_results</a></span>(<span class="dv">2015</span><span class="op">:</span><span class="dv">2019</span>, <span class="dt">results =</span> <span class="st">"Elected"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>province) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw">left_join</span>(layout_province_grid, <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"election_date"</span>, <span class="st">"riding"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">    <span class="dt">party =</span> party <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">fct_infreq</span>(),</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">    <span class="dt">province =</span> <span class="kw">fct_rev</span>(province)</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(geom_x, geom_y, <span class="dt">fill =</span> party)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_tile</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="../reference/party_colour.html">scale_fill_party</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="st">  </span><span class="kw">scale_y_reverse</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="st">  </span><span class="kw">facet_grid</span>(</a>
<a class="sourceLine" id="cb8-13" data-line-number="13">    <span class="kw">vars</span>(province), </a>
<a class="sourceLine" id="cb8-14" data-line-number="14">    <span class="kw">vars</span>(<span class="kw"><a href="http://lubridate.tidyverse.org/reference/year.html">year</a></span>(election_date)),</a>
<a class="sourceLine" id="cb8-15" data-line-number="15">    <span class="dt">scales =</span> <span class="st">"free"</span>, </a>
<a class="sourceLine" id="cb8-16" data-line-number="16">    <span class="dt">space =</span> <span class="st">"free"</span>,</a>
<a class="sourceLine" id="cb8-17" data-line-number="17">    <span class="dt">switch =</span> <span class="st">"y"</span></a>
<a class="sourceLine" id="cb8-18" data-line-number="18">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-19" data-line-number="19"><span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-20" data-line-number="20"><span class="st">  </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb8-21" data-line-number="21">    <span class="dt">strip.text.y =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">180</span>, <span class="dt">hjust =</span> <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb8-22" data-line-number="22">    <span class="dt">legend.position =</span> <span class="st">"bottom"</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="ot">NULL</span>)</a></code></pre></div>
<p><img src="plot_election_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>Even though this representation is far superior to a map, this package wouldn’t be complete if it coouldn’t plot a map. The e3asiest way to do this is using the <code><a href="../reference/plot_election_map.html">plot_election_map()</a></code> function.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/plot_election_map.html">plot_election_map</a></span>(<span class="dv">2015</span><span class="op">:</span><span class="dv">2019</span>)</a></code></pre></div>
<p><img src="plot_election_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>If you’d like a different version of this, the <code>boundaries</code> dataset within this package contains the polygons for each riding (in <a href="https://r-spatial.github.io/sf/">sf</a> format). You can join this to the <code>results</code> dataset by <code>c("election_date", "riding"))</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="../reference/election_results.html">election_results</a></span>(<span class="dv">2015</span><span class="op">:</span><span class="dv">2019</span>, <span class="dt">results =</span> <span class="st">"Elected"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw">left_join</span>(boundaries, <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"election_date"</span>, <span class="st">"riding"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> party, <span class="dt">geometry =</span> boundary))  <span class="op">+</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">size =</span> <span class="fl">0.15</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="../reference/party_colour.html">scale_fill_party</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(<span class="kw"><a href="http://lubridate.tidyverse.org/reference/year.html">year</a></span>(election_date))) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">"bottom"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="ot">NULL</span>)</a></code></pre></div>
<p><img src="plot_election_files/figure-html/test-map-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#raw-data-and-bar-charts">Raw data and bar charts</a></li>
      <li><a href="#incorporating-geography">Incorporating geography</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Dewey Dunnington.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
